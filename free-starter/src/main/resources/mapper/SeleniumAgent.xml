<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.uiautofree.agent.dao.SeleniumAgentDao">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.uiautofree.agent.domain.SeleniumAgent">
        <id column="id" property="id"/>
        <result column="gmt_create" property="gmtCreate"/>
        <result column="gmt_modified" property="gmtModified"/>
        <result column="ip_address" property="ipAddress"/>
        <result column="ip_port" property="ipPort"/>
        <result column="mac_address" property="macAddress"/>
        <result column="type" property="type"/>
        <result column="browser_type" property="browserType"/>
        <result column="browser_version" property="browserVersion"/>
        <result column="web_driver_path" property="webDriverPath"/>
        <result column="extension" property="extension"/>
        <result column="node_status" property="nodeStatus"/>
        <result column="node_process_status" property="nodeProcessStatus"/>
        <result column="remark" property="remark"/>
        <result column="is_deleted" property="isDeleted"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, gmt_create, gmt_modified, ip_address, ip_port, mac_address, type, browser_type, browser_version,
        web_driver_path, extension, node_status, node_process_status, remark, is_deleted
    </sql>

    <select id="getByMacAndDeleted" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from selenium_agent
        where mac_address=#{macAddress, jdbcType=VARCHAR}
        and is_deleted=#{isDeleted, jdbcType=INTEGER}
        order by id asc limit 1
    </select>
    <select id="getByIpAndDeleted" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from selenium_agent
        where ip_address=#{ipAddress, jdbcType=VARCHAR}
        and is_deleted=#{isDeleted, jdbcType=INTEGER}
        order by id asc limit 1
    </select>
    <select id="getById" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select
        <include refid="Base_Column_List"/>
        from selenium_agent
        where id=#{id, jdbcType=BIGINT}
    </select>

    <select id="listAgent" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from selenium_agent
        order by id asc limit #{pageStart, jdbcType=INTEGER}, #{pageSize, jdbcType=INTEGER}
    </select>
    <select id="countAgent" resultType="java.lang.Long">
        select count(*)
        from selenium_agent
    </select>


    <update id="updateByPrimaryKey" parameterType="com.uiautofree.agent.domain.SeleniumAgent">
        update selenium_agent
        <set>
            <if test="gmtCreate != null">
                gmt_create = #{gmtCreate, jdbcType=TIMESTAMP},
            </if>
            <if test="gmtModified != null">
                gmt_modified = #{gmtModified, jdbcType=TIMESTAMP},
            </if>
            <if test="ipAddress != null">
                ip_address = #{ipAddress, jdbcType=VARCHAR},
            </if>
            <if test="ipPort != null">
                ip_port = #{ipPort, jdbcType=VARCHAR},
            </if>
            <if test="macAddress != null">
                mac_address = #{macAddress, jdbcType=VARCHAR},
            </if>
            <if test="type != null">
                type = #{type, jdbcType=VARCHAR},
            </if>
            <if test="browserType != null">
                browser_type = #{browserType, jdbcType=VARCHAR},
            </if>
            <if test="browserVersion != null">
                browser_version = #{browserVersion, jdbcType=VARCHAR},
            </if>
            <if test="webDriverPath != null">
                web_driver_path = #{webDriverPath, jdbcType=VARCHAR},
            </if>
            <if test="extension != null">
                extension = #{extension, jdbcType=LONGVARCHAR},
            </if>
            <if test="remark != null">
                remark = #{remark, jdbcType=VARCHAR},
            </if>
            <if test="nodeStatus != null">
                node_status = #{nodeStatus, jdbcType=INTEGER},
            </if>
            <if test="nodeProcessStatus != null">
                node_process_status = #{nodeProcessStatus, jdbcType=INTEGER},
            </if>
            <if test="isDeleted != null">
                is_deleted = #{isDeleted, jdbcType=INTEGER}
            </if>
        </set>
        where id=#{id, jdbcType=BIGINT}
    </update>


    <insert id="insertAgent" keyProperty="id" parameterType="com.uiautofree.agent.domain.SeleniumAgent"
            useGeneratedKeys="true">
        insert into selenium_agent(gmt_create, gmt_modified, ip_address, ip_port,
        mac_address, type, browser_type, browser_version, web_driver_path,
        extension, node_status, node_process_status, remark, is_deleted)
        values(#{gmtCreate,jdbcType=TIMESTAMP}, #{gmtCreate,jdbcType=TIMESTAMP},
        #{ipAddress, jdbcType=VARCHAR}, #{ipPort, jdbcType=VARCHAR},
        #{macAddress, jdbcType=VARCHAR},#{type, jdbcType=VARCHAR},
        #{browserType, jdbcType=VARCHAR},#{browserVersion, jdbcType=VARCHAR},#{webDriverPath, jdbcType=VARCHAR},
        #{extension, jdbcType=LONGVARCHAR},#{nodeStatus, jdbcType=INTEGER},#{nodeProcessStatus, jdbcType=INTEGER},
        #{remark, jdbcType=VARCHAR}, #{isDeleted, jdbcType=INTEGER})
    </insert>


</mapper>
